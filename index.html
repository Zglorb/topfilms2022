<!DOCTYPE html>
<html>
<head>
	<title>top films</title>
	<!--Link to vue js-->
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
	/>
	<script type="importmap">
	{
		"imports": {
		"vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
		}
	}
	</script>
</head>
<body>
	<div id="app">
		<div id="bottom">
			<div v-for="(k, n) in 3" :class="`line position-${position[n]}`" :key="n">
				<div v-if="categories[categoryNb].rankings[Object.keys(categories[categoryNb].rankings)[0]][n]" @click="roll(n)">
					<img class="number" :src="`${n + 1}.png`"/>
				</div>				
				<div v-for="(user,key) in categories[categoryNb].rankings" class="card-container" :key="key">
					<button v-if="user[n]" class="button" @click="show(categoryNb, key, n)">
						{{ n + 1 }}
					</button>
					<div v-if="user[n]" :class="`card ${user[n].hidden ? 'hidden' : 'animate__animated animate__jackInTheBox'}`" :style="`width: ${335 - (n*50)}px`" >
						<img class="background" :src="user[n].background">
						<div class="card-title" :style="`transform: rotate(${user[n].tilt}deg); font-size: ${fontSize(n, user[n].title)}px`">
							{{ user[n].title.toUpperCase() }}
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="dropdown">
			<button v-for="(key, value) in categories" @click="categoryNb = value">
					{{ key.title }}
			</button>
		</div>
	</div>

	<script type="module">
	import { createApp } from 'vue'

	createApp({
		data() {
		return {
			message: 'Hello Vue!',
			categoryNb: 0,
			rank: 0,
			position: [0, 1, 2],
			categories: [
  {
    "title": "Top 3 film 2022 ",
    "rankings": {
      "Potatoz": [
        {
          "title": "The Fabelmans",
          "background": "https://image.tmdb.org/t/p/w500/xId9zoiv5WPQOuxqykUDrlpmrUz.jpg",
          "hidden": true
        },
        {
          "title": "Blonde",
          "background": "https://image.tmdb.org/t/p/w500/jOgbnL5FB30pprEjZaY1E1iPtPM.jpg",
          "hidden": true
        },
        {
          "title": "Avatar 2",
          "background": "https://image.tmdb.org/t/p/w500/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg",
          "hidden": true
        }
      ],
      "Grimkujow": [
        {
          "title": "Avatar 2",
          "background": "https://image.tmdb.org/t/p/w500/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg",
          "hidden": true
        },
        {
          "title": "Conspiration du Caire",
          "background": "https://image.tmdb.org/t/p/w500/uV9vncbbQlwtTSOv9vPVYkbmN4X.jpg",
          "hidden": true
        },
        {
          "title": "Bardo",
          "background": "https://image.tmdb.org/t/p/w500/3e6RA0CzFDC0pz5TqiRlbHcsc2n.jpg",
          "hidden": true
        }
      ],
      "MNKway": [
        {
          "title": "Avatar",
          "background": "https://image.tmdb.org/t/p/w500/jRXYjXNq0Cs2TcJjLkki24MLp7u.jpg",
          "hidden": true
        },
        {
          "title": "Shin Ultraman",
          "background": "https://image.tmdb.org/t/p/w500/9bU8K4rdRhM03tAVW0MNXTx5kFQ.jpg",
          "hidden": true
        },
        {
          "title": "Decision to Leave",
          "background": "https://www.themoviedb.org/t/p/original/pDpfZtcRQUYgWPbqkfC8qOevXiv.jpg",
          "hidden": true
        }
      ],
      "Terracid": [
        {
          "title": "The Green Knight",
          "background": "https://image.tmdb.org/t/p/w500/if4hw3Ou5Sav9Em7WWHj66mnywp.jpg",
          "hidden": true
        },
        {
          "title": "Athena",
          "background": "https://image.tmdb.org/t/p/w500/s8B0GsFEebd0DW2spykLMxnc1Kn.jpg",
          "hidden": true
        },
        {
          "title": "The Northman",
          "background": "https://image.tmdb.org/t/p/w500/aSSJMnHknzKjlZ6zybwD7eyJ4Po.jpg",
          "hidden": true
        }
      ],
      "happy": [
        {
          "title": "blonde",
          "background": "https://image.tmdb.org/t/p/w500/jOgbnL5FB30pprEjZaY1E1iPtPM.jpg",
          "hidden": true
        },
        {
          "title": "avatar",
          "background": "https://image.tmdb.org/t/p/w500/jRXYjXNq0Cs2TcJjLkki24MLp7u.jpg",
          "hidden": true
        },
        {
          "title": "pinocchio del torro",
          "background": "https://image.tmdb.org/t/p/w500/vx1u0uwxdlhV2MUzj4VlcMB0N6m.jpg",
          "hidden": true
        }
      ]
    }
  },
  {
    "title": "Flop 3 film 2022 ",
    "rankings": {
      "Potatoz": [
        {
          "title": "Glass Onion",
          "background": "https://image.tmdb.org/t/p/w500/vDGr1YdrlfbU9wxTOdpf3zChmv9.jpg",
          "hidden": true
        },
        {
          "title": "Nope",
          "background": "https://image.tmdb.org/t/p/w500/AcKVlWaNVVVFQwro3nLXqPljcYA.jpg",
          "hidden": true
        },
        {
          "title": "Doctor Strange 2",
          "background": "https://image.tmdb.org/t/p/w500/fwBl3J2aEXru6mrr9Xg8O99Iz2K.jpg",
          "hidden": true
        }
      ],
      "Grimkujow": [
        {
          "title": "En Corps",
          "background": "https://image.tmdb.org/t/p/w500/wymdTmKl2uyuIWa82qaJgmevyZ1.jpg",
          "hidden": true
        },
        {
          "title": "Novembre",
          "background": "https://image.tmdb.org/t/p/w500/muXJAhYO0RWq0F0KWXqEswpNckr.jpg",
          "hidden": true
        },
        {
          "title": "Armageddon Time",
          "background": "https://image.tmdb.org/t/p/w500/jCLmDpJYNPfDirkgfzhZXZY6nrm.jpg",
          "hidden": true
        }
      ],
      "MNKway": [
        {
          "title": "Morbius",
          "background": "https://image.tmdb.org/t/p/w500/6JjfSchsU6daXk2AKX8EEBjO3Fm.jpg",
          "hidden": true
        },
        {
          "title": "Prey",
          "background": "https://image.tmdb.org/t/p/w500/ujr5pztc1oitbe7ViMUOilFaJ7s.jpg",
          "hidden": true
        },
        {
          "title": "X",
          "background": "https://image.tmdb.org/t/p/w500/woTQx9Q4b8aO13jR9dsj8C9JESy.jpg",
          "hidden": true
        }
      ],
      "Terracid": [
        {
          "title": "Men",
          "background": "https://image.tmdb.org/t/p/w500/jo1Kv3P3UgDVk7JnUFr2Cl8WWUM.jpg",
          "hidden": true
        },
        {
          "title": "Nightmare Alley",
          "background": "https://image.tmdb.org/t/p/w500/tgnZxc8PxbwKFJvlTxew9jpYFZo.jpg",
          "hidden": true
        },
        {
          "title": "Spencer",
          "background": "https://image.tmdb.org/t/p/w500/7GcqdBKaMM9BWXWN07BirBMkcBF.jpg",
          "hidden": true
        }
      ],
      "happy": [
        {
          "title": "pinocchio zemeckis",
          "background": "https://fr.web.img2.acsta.net/pictures/22/08/25/09/39/1782291.jpg",
          "hidden": true
        },
        {
          "title": "thor",
          "background": "https://image.tmdb.org/t/p/w500/pIkRyD18kl4FhoCNQuWxWu5cBLM.jpg",
          "hidden": true
        },
        {
          "title": "arthur malédiction",
          "background": "https://image.tmdb.org/t/p/w500/3Hdjclma1lkMeJDsA7VfpOY4Jrd.jpg",
          "hidden": true
        }
      ]
    }
  },
  {
    "title": " Top 1 Série 2022 ",
    "rankings": {
      "Potatoz": [
        {
          "title": "Better Call Saul",
          "background": "https://flxt.tmsimg.com/assets/p13837077_b_v8_aa.jpg",
          "hidden": true
        }
      ],
      "Grimkujow": [
        {
          "title": "Twin Peaks",
          "background": "https://m.media-amazon.com/images/M/MV5BMTExNzk2NjcxNTNeQTJeQWpwZ15BbWU4MDcxOTczOTIx._V1_FMjpg_UX1000_.jpg",
          "hidden": true
        }
      ],
      "MNKway": [
        {
          "title": "House of Dragon",
          "background": "https://m.media-amazon.com/images/M/MV5BZjBiOGIyY2YtOTA3OC00YzY1LThkYjktMGRkYTNhNTExY2I2XkEyXkFqcGdeQXVyMTEyMjM2NDc2._V1_.jpg",
          "hidden": true
        }
      ],
      "Terracid": [
        {
          "title": "House of the Dragon",
          "background": "https://m.media-amazon.com/images/M/MV5BZjBiOGIyY2YtOTA3OC00YzY1LThkYjktMGRkYTNhNTExY2I2XkEyXkFqcGdeQXVyMTEyMjM2NDc2._V1_.jpg",
          "hidden": true
        }
      ],
      "happy": [
        {
          "title": "pas vu",
          "background": "",
          "hidden": true
        }
      ]
    }
  },
  {
    "title": " Top 3 film hors 2022 ",
    "rankings": {
      "Potatoz": [
        {
          "title": "Paris Texas",
          "background": "https://image.tmdb.org/t/p/w500/6NuFYT1f1rG0AeIVTJEgsRa7AOi.jpg",
          "hidden": true
        },
        {
          "title": "L'Armée des ombres",
          "background": "https://image.tmdb.org/t/p/w500/aqNZWM9bspt8zaDvVRIRiWxRVJ7.jpg",
          "hidden": true
        },
        {
          "title": "Sailor & Lula",
          "background": "https://image.tmdb.org/t/p/w500/uLUFI5sJIfWrBUWB2Y1dEuyvvVy.jpg",
          "hidden": true
        }
      ],
      "Grimkujow": [
        {
          "title": "Phantom of the paradise",
          "background": "https://image.tmdb.org/t/p/w500/AkS1Pg1bUKMzfhItnoMscLY3RJn.jpg",
          "hidden": true
        },
        {
          "title": "Magnolia",
          "background": "https://image.tmdb.org/t/p/w500/uq2u8HgtLFJkjNq2kHb2jvipIPT.jpg",
          "hidden": true
        },
        {
          "title": "Jesse James",
          "background": "https://image.tmdb.org/t/p/w500/s85NggId22ntp4pbYwTbtHdalnY.jpg",
          "hidden": true
        }
      ],
      "MNKway": [
        {
          "title": "Persona",
          "background": "https://image.tmdb.org/t/p/w500/bdXbfUir63TQHA5NTNcXPICZCW8.jpg",
          "hidden": true
        },
        {
          "title": "The face of Another",
          "background": "https://image.tmdb.org/t/p/w500/eUnFdf1Mf1b8AD3ChMPOCUfTBDQ.jpg",
          "hidden": true
        },
        {
          "title": "On the Silver Globe",
          "background": "https://image.tmdb.org/t/p/w500/lgASG2HH1LkFmytPauPdw7GnzRJ.jpg",
          "hidden": true
        }
      ],
      "Terracid": [
        {
          "title": "Wind River",
          "background": "https://image.tmdb.org/t/p/w500/pySivdR845Hom4u4T2WNkJxe6Ad.jpg",
          "hidden": true
        },
        {
          "title": "Justice League Snyder's cut",
          "background": "https://image.tmdb.org/t/p/w500/tnAuB8q5vv7Ax9UAEje5Xi4BXik.jpg",
          "hidden": true
        },
        {
          "title": "Le Secret des Marrowbone",
          "background": "https://image.tmdb.org/t/p/w500/ykn2GWDINcbunWPoNVRQtMaybo7.jpg",
          "hidden": true
        }
      ],
      "happy": [
        {
          "title": "magnolia",
          "background": "https://image.tmdb.org/t/p/w500/uq2u8HgtLFJkjNq2kHb2jvipIPT.jpg",
          "hidden": true
        },
        {
          "title": "king of comedy",
          "background": "https://image.tmdb.org/t/p/w500/m24EbHxT9NGYEkOlu29YcLOgjgK.jpg",
          "hidden": true
        },
        {
          "title": "chinatown",
          "background": "https://image.tmdb.org/t/p/w500/7ljxmU9L0ugUvyyg0GBkFaarjEq.jpg",
          "hidden": true
        }
      ]
    }
  },
  {
    "title": "Coup de cœur 2022 ",
    "rankings": {
      "Potatoz": [
        {
          "title": "Les Banshees d'Inisherin",
          "background": "https://image.tmdb.org/t/p/w500/dpeR3ue0Q93Rk8jhE2DzVPMRGIm.jpg",
          "hidden": true
        }
      ],
      "Grimkujow": [
        {
          "title": "EO",
          "background": "https://image.tmdb.org/t/p/w500/p5txVytUOKpEQ869oKfT6wimTYg.jpg",
          "hidden": true
        }
      ],
      "MNKway": [
        {
          "title": "Funeral Parade of Roses",
          "background": "https://image.tmdb.org/t/p/w500/7cRQ6rSGajW2soWDr3voEN2rgYO.jpg",
          "hidden": true
        }
      ],
      "Terracid": [
        {
          "title": "Le Dernier Duel",
          "background": "https://image.tmdb.org/t/p/w500/zjrJE0fpzPvX8saJXj8VNfcjBoU.jpg",
          "hidden": true
        }
      ],
      "happy": [
        {
          "title": "le chat potté 2",
          "background": "https://image.tmdb.org/t/p/w500/lmf0zzR7ritjOL3qumRh3hfvOFK.jpg",
          "hidden": true
        }
      ]
    }
  }
]
		}
		},
		mounted(){
			for(let category of this.categories){
				console.log(category.rankings)
				for(let ranking in category.rankings){
					for(let movie of category.rankings[ranking]){
						movie.tilt = this.randomTilt()
					}
				}
			}
		},
		methods:{
				randomTilt(){
					return Math.random() * 10 - 5
				},
				fontSize(n, text){
					let estimation = ((390 - (n*50))/text.length)
					return estimation < 30 ? 30 : estimation > 86 ? 85 : estimation
				},
				roll(n){
					let clickedOn = this.position[n]
					let firstIndex = this.position.findIndex((e) => e == 0);
					console.log(firstIndex)
					// this.position[firstIndex] = clickedOn
					this.position[n] = 0
					let x = 1;
					for(let i = 0; i < 3; i++){
						if (i != n){
							this.position[i] = x
							x++
						}
					}
				},
				show(category, user, index){
					this.categories[category].rankings[user][index].hidden = !this.categories[category].rankings[user][index].hidden
				},
			},
	}).mount('#app')
	</script>
<style>
	@font-face {
		font-family: trinstam;
		src: url(Trinstam.ttf);
	}
	#dropdown button {
		height: 60px;
		width: 500px;
		font-size: 30px;
	}
	#bottom{
		position: absolute;
		bottom: 500px;
	}
	#app{
		height: 1080px;
		width: 1920px;
	}
	#dropdown{
		display: flex;
		flex-direction: row;
		position: relative;
		bottom: 0;
	}
	.button{
		position: absolute;
		top: -360px;
		width: 100px;
		height: 100px;
	}
	.line {
		position: absolute;
		display: flex;
		flex-direction: row;
		align-items: center;
		transition: top 2s ease 0s; /* only transition top property */
		top: 0;
	}
	.position-0{
		top: 0;
		z-index: 1;
		transition: top 2s ease 0s; 
	}
	.position-1{
		top: 120px;
		z-index: 2;
		transition: top 2s ease 0s; 
	}
	.position-2{
		transition: top 2s ease 0s;
		top: 240px;
		z-index: 3;
	}
	/* .line:nth-of-type(1) {
		margin-bottom: -55px;
	}
	.line:nth-child(2) {
		margin-bottom: -55px;
	} */
	.hidden {
		visibility: hidden;
	}
	.number {
		height: 150px;
    margin-right: -23px;
	}
	.card-container {
		user-select: none;
		display: flex;
		justify-content: center;
		align-items: center;
		width: 350px;
		height: 110px;
		cursor: pointer;
	}
	.card {
		display: flex;
		justify-content: center;
		align-items: center;
		position: relative;
		/* width: 300px; */
		height: 100%;
		margin: 0 10px;
		border-radius: 35px;
		padding-left: 5px;
		overflow: hidden;
		padding-right: 5px;
		box-shadow: -5px 7px 12px -1px #000000;
		background-color: black;
	}
	.card-title {
		color: white;
		/* font-size: 30px; */
		font-weight: bold;
		text-align: center;
		font-family: trinstam;
	}
	img.background {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: -1;
      width: 100%;
      height: 100%;
      filter: blur(5px) brightness(0.5);
    }
</style>
</body>
</html>